
[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90m/config/Desktop/gat/portfolio[39m

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts
[22m[39m[dotenv@17.2.3] injecting env (37) from .env.test -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39m[dotenv@17.2.3] injecting env (37) from .env.test -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
üêò Connecting to real PostgreSQL for tests...
üîå Ensuring vector extension...

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39m‚úÖ Vector extension ready.
üìú Running migrations on PostgreSQL...
Query: CREATE SCHEMA IF NOT EXISTS "drizzle"

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: 
			CREATE TABLE IF NOT EXISTS "drizzle"."__drizzle_migrations" (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: select id, hash, created_at from "drizzle"."__drizzle_migrations" order by created_at desc limit 1

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: begin

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: commit

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39m‚úÖ Migrations completed.

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: DO $$
        BEGIN
          IF EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'users') THEN
            TRUNCATE users, tenant_setting, tenants RESTART IDENTITY CASCADE;
          END IF;
        END $$;

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: SELECT id FROM tenants WHERE slug = 'localhost' LIMIT 1

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: 
    INSERT INTO tenants (name, slug, domain, email, plan, is_active, created_at, updated_at)
    VALUES ('Localhost Tenant', 'localhost', 'localhost', 'test@localhost.com', 'ENTERPRISE', true, NOW(), NOW())
    RETURNING id
  

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: 
      INSERT INTO tenant_setting (tenant_id, is_verified, color_primary, color_secondary, default_language, time_zone, created_at, updated_at)
      VALUES ($1, true, '#000000', '#ffffff', 'EN', 'UTC', NOW(), NOW())
     -- params: [1]

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: 
      INSERT INTO users (username, email, password, role_id, tenant_id, is_superuser, security_stamp, created_at, updated_at)
      VALUES ('admin', 'admin@localhost.com', $1, 1, $2, true, '550e8400-e29b-41d4-a716-446655440000', NOW(), NOW())
     -- params: ["$2b$10$iGOQseueEIsEwS1HbSOpO.O/r69fzLgWKiuLZdna9xoRN8KmVC7wG", 1]

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: 
      INSERT INTO users (username, email, password, role_id, tenant_id, is_superuser, security_stamp, created_at, updated_at)
      VALUES ('user', 'user@localhost.com', $1, 2, $2, false, '550e8400-e29b-41d4-a716-446655440005', NOW(), NOW())
     -- params: ["$2b$10$iGOQseueEIsEwS1HbSOpO.O/r69fzLgWKiuLZdna9xoRN8KmVC7wG", 1]

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: SELECT id FROM tenants WHERE slug = 'localhost' LIMIT 1

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mQuery: 
      INSERT INTO work_experiences (company, position, description, location, start_date, tenant_id, created_at, updated_at)
      VALUES ('Test Co', 'Developer', 'Test Desc', 'Test Loc', NOW(), $1, NOW(), NOW())
      RETURNING id
     -- params: [1]

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)
[22m[39mDEBUG: experienceId = [33m1[39m

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPOST /api/milestones[2m > [22m[2mshould create a new milestone (Admin)
[22m[39m‚û°Ô∏è  Proceeding to next middleware/guard for POST /

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPOST /api/milestones[2m > [22m[2mshould create a new milestone (Admin)
[22m[39müîë JWT Payload: {
  sub: [33m1[39m,
  email: [32m'admin@localhost.com'[39m,
  role_id: [33m1[39m,
  tenant_id: [33m1[39m,
  security_stamp: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  iat: [33m1769328314[39m,
  exp: [33m1769329214[39m
}

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPOST /api/milestones[2m > [22m[2mshould create a new milestone (Admin)
[22m[39müë§ User found in Auth Guard: admin@localhost.com
üõ°Ô∏è Comparing stamps: {
  db: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  payload: [32m'550e8400-e29b-41d4-a716-446655440000'[39m
}

[31m[Nest] 1493104  - [39m01/25/2026, 3:05:14 AM [31m  ERROR[39m [38;5;3m[HttpExceptionFilter] [39mTypeError: value.toISOString is not a function
    at PgDate.mapToDriverValue [90m(file:///config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/[4mdrizzle-orm[24m/pg-core/columns/date.js:25:18[90m)[39m
    at [90mfile:///config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/[4mdrizzle-orm[24m/sql/sql.js:141:73
    at Array.map (<anonymous>)
    at SQL.buildQueryFromSourceParams [90m(file:///config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/[4mdrizzle-orm[24m/sql/sql.js:83:32[90m)[39m
    at [90mfile:///config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/[4mdrizzle-orm[24m/sql/sql.js:102:21
    at Array.map (<anonymous>)
    at SQL.buildQueryFromSourceParams [90m(file:///config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/[4mdrizzle-orm[24m/sql/sql.js:83:32[90m)[39m
    at [90mfile:///config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/[4mdrizzle-orm[24m/sql/sql.js:105:21
    at Array.map (<anonymous>)
    at SQL.buildQueryFromSourceParams [90m(file:///config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/[4mdrizzle-orm[24m/sql/sql.js:83:32[90m)[39m
[90mstderr[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPOST /api/milestones[2m > [22m[2mshould create a new milestone (Admin)
[22m[39mDEBUG DRIZZLE ERROR: {}

[90mstderr[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPOST /api/milestones[2m > [22m[2mshould create a new milestone (Admin)
[22m[39m‚ùå POST /api/milestones failed: {
  "path": "/api/milestones",
  "timestamp": "2026-01-25T08:05:14.551Z",
  "success": false,
  "statusCode": 500,
  "message": "Internal server error",
  "exception": {
    "message": "value.toISOString is not a function",
    "stack": "TypeError: value.toISOString is not a function\n    at PgDate.mapToDriverValue (file:///config/Desktop/gat/portfolio/node_modules/.pnpm/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/drizzle-orm/pg-core/columns/date.js:25:18)\n    at file:///config/Desktop/gat/portfolio/node_modules/.pnpm/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/drizzle-orm/sql/sql.js:141:73\n    at Array.map (<anonymous>)\n    at SQL.buildQueryFromSourceParams (file:///config/Desktop/gat/portfolio/node_modules/.pnpm/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/drizzle-orm/sql/sql.js:83:32)\n    at file:///config/Desktop/gat/portfolio/node_modules/.pnpm/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/drizzle-orm/sql/sql.js:102:21\n    at Array.map (<anonymous>)\n    at SQL.buildQueryFromSourceParams (file:///config/Desktop/gat/portfolio/node_modules/.pnpm/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/drizzle-orm/sql/sql.js:83:32)\n    at file:///config/Desktop/gat/portfolio/node_modules/.pnpm/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/drizzle-orm/sql/sql.js:105:21\n    at Array.map (<anonymous>)\n    at SQL.buildQueryFromSourceParams (file:///config/Desktop/gat/portfolio/node_modules/.pnpm/drizzle-orm@0.45.1_@electric-sql+pglite@0.3.14_@opentelemetry+api@1.9.0_@types+pg@8.16.0_pg@8.16.3/node_modules/drizzle-orm/sql/sql.js:83:32)"
  }
}

[2026-01-25 03:05:14.554 -0500] [31mERROR[39m: [36mPOST /api/milestones [33m- Request failed: failed with status code 500[0m[39m
    [35mreq[39m: {
      "id": "b679104d-4d10-41a9-9b8c-b12d10cfa519",
      "method": "POST",
      "url": "/api/milestones",
      "ip": "::ffff:127.0.0.1"
    }
    [35mres[39m: {
      "statusCode": 500
    }
    [35mresponseTime[39m: 21
    err: {
      "type": "Error",
      "message": "failed with status code 500",
      "stack":
          Error: failed with status code 500
              at onResFinished (/config/Desktop/gat/portfolio/node_modules/.pnpm/pino-http@11.0.0/node_modules/pino-http/logger.js:115:39)
              at ServerResponse.onResponseComplete (/config/Desktop/gat/portfolio/node_modules/.pnpm/pino-http@11.0.0/node_modules/pino-http/logger.js:178:14)
              at ServerResponse.emit (node:events:520:35)
              at onFinish (node:_http_outgoing:1026:10)
              at callback (node:internal/streams/writable:764:21)
              at afterWrite (node:internal/streams/writable:708:5)
              at afterWriteTick (node:internal/streams/writable:694:10)
              at processTicksAndRejections (node:internal/process/task_queues:88:21)
    }
[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mGET /api/milestones[2m > [22m[2mshould list milestones for an experience (Public)
[22m[39m‚û°Ô∏è  Proceeding to next middleware/guard for GET /?experience_id=1

[2026-01-25 03:05:14.593 -0500] [32mINFO[39m: [36mGET /api/milestones?experience_id=1 [33m- Request completed in 14ms[0m[39m
    [35mreq[39m: {
      "id": "0e222a7c-a6c3-4d48-beb6-56b008026830",
      "method": "GET",
      "url": "/api/milestones?experience_id=1",
      "ip": "::ffff:127.0.0.1"
    }
    [35mres[39m: {
      "statusCode": 200
    }
    [35mresponseTime[39m: 14
[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould update a milestone (Admin)
[22m[39m‚û°Ô∏è  Proceeding to next middleware/guard for PUT /

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould update a milestone (Admin)
[22m[39müîë JWT Payload: {
  sub: [33m1[39m,
  email: [32m'admin@localhost.com'[39m,
  role_id: [33m1[39m,
  tenant_id: [33m1[39m,
  security_stamp: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  iat: [33m1769328314[39m,
  exp: [33m1769329214[39m
}

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould update a milestone (Admin)
[22m[39müë§ User found in Auth Guard: admin@localhost.com
üõ°Ô∏è Comparing stamps: {
  db: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  payload: [32m'550e8400-e29b-41d4-a716-446655440000'[39m
}

[90mstderr[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould update a milestone (Admin)
[22m[39mDEBUG DRIZZLE ERROR: {
  "response": {
    "message": "Validation failed (numeric string is expected)",
    "error": "Bad Request",
    "statusCode": 400
  },
  "status": 400,
  "options": {},
  "message": "Validation failed (numeric string is expected)",
  "name": "BadRequestException"
}

[90mstderr[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould update a milestone (Admin)
[22m[39m‚ùå PUT /api/milestones/:id failed: {
  "path": "/api/milestones/undefined",
  "timestamp": "2026-01-25T08:05:14.600Z",
  "success": false,
  "statusCode": 400,
  "message": "Validation failed (numeric string is expected)",
  "error": "Bad Request",
  "exception": {
    "message": "Validation failed (numeric string is expected)",
    "stack": "BadRequestException: Validation failed (numeric string is expected)\n    at ParseIntPipe.exceptionFactory (/config/Desktop/gat/portfolio/node_modules/.pnpm/@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/@nestjs/common/pipes/parse-int.pipe.js:24:27)\n    at ParseIntPipe.transform (/config/Desktop/gat/portfolio/node_modules/.pnpm/@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/@nestjs/common/pipes/parse-int.pipe.js:38:24)\n    at /config/Desktop/gat/portfolio/node_modules/.pnpm/@nestjs+core@11.1.11_@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+_8ca719937ba9644702b0d6fbf7ffeeb4/node_modules/@nestjs/core/pipes/pipes-consumer.js:16:33\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"
  }
}

[31m[Nest] 1493104  - [39m01/25/2026, 3:05:14 AM [31m  ERROR[39m [38;5;3m[HttpExceptionFilter] [39mBadRequestException: Validation failed (numeric string is expected)
    at ParseIntPipe.exceptionFactory [90m(/config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/[4m@nestjs/common[24m/pipes/parse-int.pipe.js:24:27[90m)[39m
    at ParseIntPipe.transform [90m(/config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/[4m@nestjs/common[24m/pipes/parse-int.pipe.js:38:24[90m)[39m
    at [90m/config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/@nestjs+core@11.1.11_@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+_8ca719937ba9644702b0d6fbf7ffeeb4/node_modules/[4m@nestjs/core[24m/pipes/pipes-consumer.js:16:33
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m {
  response: {
    message: [32m'Validation failed (numeric string is expected)'[39m,
    error: [32m'Bad Request'[39m,
    statusCode: [33m400[39m
  },
  status: [33m400[39m,
  options: {}
}
[2026-01-25 03:05:14.601 -0500] [33mWARN[39m: [36mPUT /api/milestones/undefined [33m- Request completed in 6ms[0m[39m
    [35mreq[39m: {
      "id": "ee99f8b2-f9b1-45da-bff9-08dd6b7f742a",
      "method": "PUT",
      "url": "/api/milestones/undefined",
      "ip": "::ffff:127.0.0.1"
    }
    [35mres[39m: {
      "statusCode": 400
    }
    [35mresponseTime[39m: 6
[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould return 404 for non-existent milestone
[22m[39m‚û°Ô∏è  Proceeding to next middleware/guard for PUT /

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould return 404 for non-existent milestone
[22m[39müîë JWT Payload: {
  sub: [33m1[39m,
  email: [32m'admin@localhost.com'[39m,
  role_id: [33m1[39m,
  tenant_id: [33m1[39m,
  security_stamp: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  iat: [33m1769328314[39m,
  exp: [33m1769329214[39m
}

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould return 404 for non-existent milestone
[22m[39müë§ User found in Auth Guard: admin@localhost.com
üõ°Ô∏è Comparing stamps: {
  db: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  payload: [32m'550e8400-e29b-41d4-a716-446655440000'[39m
}

[31m[Nest] 1493104  - [39m01/25/2026, 3:05:14 AM [31m  ERROR[39m [38;5;3m[HttpExceptionFilter] [39mNotFoundException: Milestone #999999 not found
    at WorkMilestoneService.update [90m(/config/Desktop/gat/portfolio/[39msrc/modules/work-milestone/services/work-milestone.service.ts:77:10[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m {
  response: {
    message: [32m'Milestone #999999 not found'[39m,
    error: [32m'Not Found'[39m,
    statusCode: [33m404[39m
  },
  status: [33m404[39m,
  options: {}
}
[90mstderr[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mPUT /api/milestones/:id[2m > [22m[2mshould return 404 for non-existent milestone
[22m[39mDEBUG DRIZZLE ERROR: {
  "response": {
    "message": "Milestone #999999 not found",
    "error": "Not Found",
    "statusCode": 404
  },
  "status": 404,
  "options": {},
  "message": "Milestone #999999 not found",
  "name": "NotFoundException"
}

[2026-01-25 03:05:14.610 -0500] [33mWARN[39m: [36mPUT /api/milestones/999999 [33m- Request completed in 6ms[0m[39m
    [35mreq[39m: {
      "id": "cde4c381-ed23-4f86-84f8-5de0bb721b85",
      "method": "PUT",
      "url": "/api/milestones/999999",
      "ip": "::ffff:127.0.0.1"
    }
    [35mres[39m: {
      "statusCode": 404
    }
    [35mresponseTime[39m: 6
[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould delete a milestone (Admin)
[22m[39m‚û°Ô∏è  Proceeding to next middleware/guard for DELETE /

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould delete a milestone (Admin)
[22m[39müîë JWT Payload: {
  sub: [33m1[39m,
  email: [32m'admin@localhost.com'[39m,
  role_id: [33m1[39m,
  tenant_id: [33m1[39m,
  security_stamp: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  iat: [33m1769328314[39m,
  exp: [33m1769329214[39m
}

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould delete a milestone (Admin)
[22m[39müë§ User found in Auth Guard: admin@localhost.com
üõ°Ô∏è Comparing stamps: {
  db: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  payload: [32m'550e8400-e29b-41d4-a716-446655440000'[39m
}

[31m[Nest] 1493104  - [39m01/25/2026, 3:05:14 AM [31m  ERROR[39m [38;5;3m[HttpExceptionFilter] [39mBadRequestException: Validation failed (numeric string is expected)
    at ParseIntPipe.exceptionFactory [90m(/config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/[4m@nestjs/common[24m/pipes/parse-int.pipe.js:24:27[90m)[39m
    at ParseIntPipe.transform [90m(/config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/[4m@nestjs/common[24m/pipes/parse-int.pipe.js:38:24[90m)[39m
    at [90m/config/Desktop/gat/portfolio/[39mnode_modules/[4m.pnpm[24m/@nestjs+core@11.1.11_@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+_8ca719937ba9644702b0d6fbf7ffeeb4/node_modules/[4m@nestjs/core[24m/pipes/pipes-consumer.js:16:33
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m {
  response: {
    message: [32m'Validation failed (numeric string is expected)'[39m,
    error: [32m'Bad Request'[39m,
    statusCode: [33m400[39m
  },
  status: [33m400[39m,
  options: {}
}
[90mstderr[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould delete a milestone (Admin)
[22m[39mDEBUG DRIZZLE ERROR: {
  "response": {
    "message": "Validation failed (numeric string is expected)",
    "error": "Bad Request",
    "statusCode": 400
  },
  "status": 400,
  "options": {},
  "message": "Validation failed (numeric string is expected)",
  "name": "BadRequestException"
}

[90mstderr[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould delete a milestone (Admin)
[22m[39m‚ùå DELETE /api/milestones/:id failed: {
  "path": "/api/milestones/undefined",
  "timestamp": "2026-01-25T08:05:14.615Z",
  "success": false,
  "statusCode": 400,
  "message": "Validation failed (numeric string is expected)",
  "error": "Bad Request",
  "exception": {
    "message": "Validation failed (numeric string is expected)",
    "stack": "BadRequestException: Validation failed (numeric string is expected)\n    at ParseIntPipe.exceptionFactory (/config/Desktop/gat/portfolio/node_modules/.pnpm/@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/@nestjs/common/pipes/parse-int.pipe.js:24:27)\n    at ParseIntPipe.transform (/config/Desktop/gat/portfolio/node_modules/.pnpm/@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/@nestjs/common/pipes/parse-int.pipe.js:38:24)\n    at /config/Desktop/gat/portfolio/node_modules/.pnpm/@nestjs+core@11.1.11_@nestjs+common@11.1.10_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+_8ca719937ba9644702b0d6fbf7ffeeb4/node_modules/@nestjs/core/pipes/pipes-consumer.js:16:33\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"
  }
}

[2026-01-25 03:05:14.616 -0500] [33mWARN[39m: [36mDELETE /api/milestones/undefined [33m- Request completed in 4ms[0m[39m
    [35mreq[39m: {
      "id": "50ad0b4c-75cb-45ff-8e7e-9e83f8ad8f44",
      "method": "DELETE",
      "url": "/api/milestones/undefined",
      "ip": "::ffff:127.0.0.1"
    }
    [35mres[39m: {
      "statusCode": 400
    }
    [35mresponseTime[39m: 4
[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould return 404 for non-existent milestone
[22m[39m‚û°Ô∏è  Proceeding to next middleware/guard for DELETE /

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould return 404 for non-existent milestone
[22m[39müîë JWT Payload: {
  sub: [33m1[39m,
  email: [32m'admin@localhost.com'[39m,
  role_id: [33m1[39m,
  tenant_id: [33m1[39m,
  security_stamp: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  iat: [33m1769328314[39m,
  exp: [33m1769329214[39m
}

[90mstdout[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould return 404 for non-existent milestone
[22m[39müë§ User found in Auth Guard: admin@localhost.com
üõ°Ô∏è Comparing stamps: {
  db: [32m'550e8400-e29b-41d4-a716-446655440000'[39m,
  payload: [32m'550e8400-e29b-41d4-a716-446655440000'[39m
}

 [31m√ó[39m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mPOST /api/milestones[2m > [22mshould create a new milestone (Admin)[32m 43[2mms[22m[39m
[31m   ‚Üí expected 500 to be 201 // Object.is equality[39m
 [31m√ó[39m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mGET /api/milestones[2m > [22mshould list milestones for an experience (Public)[32m 31[2mms[22m[39m
[31m   ‚Üí expected 0 to be greater than 0[39m
 [31m√ó[39m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mPUT /api/milestones/:id[2m > [22mshould update a milestone (Admin)[32m 8[2mms[22m[39m
[31m   ‚Üí expected 400 to be 200 // Object.is equality[39m
 [32m‚úì[39m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mPUT /api/milestones/:id[2m > [22mshould return 404 for non-existent milestone[32m 9[2mms[22m[39m
 [31m√ó[39m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mDELETE /api/milestones/:id[2m > [22mshould delete a milestone (Admin)[32m 6[2mms[22m[39m
[31m   ‚Üí expected 400 to be 200 // Object.is equality[39m
[90mstderr[2m | src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22m[2mWorkMilestoneModule (e2e)[2m > [22m[2mDELETE /api/milestones/:id[2m > [22m[2mshould return 404 for non-existent milestone
[22m[39mDEBUG DRIZZLE ERROR: {
  "response": {
    "message": "Milestone #999999 not found",
    "error": "Not Found",
    "statusCode": 404
  },
  "status": 404,
  "options": {},
  "message": "Milestone #999999 not found",
  "name": "NotFoundException"
}

[31m[Nest] 1493104  - [39m01/25/2026, 3:05:14 AM [31m  ERROR[39m [38;5;3m[HttpExceptionFilter] [39mNotFoundException: Milestone #999999 not found
    at WorkMilestoneService.destroy [90m(/config/Desktop/gat/portfolio/[39msrc/modules/work-milestone/services/work-milestone.service.ts:105:10[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m {
  response: {
    message: [32m'Milestone #999999 not found'[39m,
    error: [32m'Not Found'[39m,
    statusCode: [33m404[39m
  },
  status: [33m404[39m,
  options: {}
}
[2026-01-25 03:05:14.625 -0500] [33mWARN[39m: [36mDELETE /api/milestones/999999 [33m- Request completed in 7ms[0m[39m
    [35mreq[39m: {
      "id": "f707da97-33d9-42d2-ac52-ca035038f469",
      "method": "DELETE",
      "url": "/api/milestones/999999",
      "ip": "::ffff:127.0.0.1"
    }
    [35mres[39m: {
      "statusCode": 404
    }
    [35mresponseTime[39m: 7
 [32m‚úì[39m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mDELETE /api/milestones/:id[2m > [22mshould return 404 for non-existent milestone[32m 8[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 4 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mPOST /api/milestones[2m > [22mshould create a new milestone (Admin)
[31m[1mAssertionError[22m: expected 500 to be 201 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 201[39m
[31m+ 500[39m

[36m [2m‚ùØ[22m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts:[2m92:28[22m[39m
    [90m 90| [39m   }
    [90m 91| [39m
    [90m 92| [39m   [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m201[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m 93| [39m   [34mexpect[39m(response[33m.[39mbody[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m 94| [39m   [34mexpect[39m(response[33m.[39mbody[33m.[39mmilestone)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/4]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mGET /api/milestones[2m > [22mshould list milestones for an experience (Public)
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2m‚ùØ[22m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts:[2m109:41[22m[39m
    [90m107| [39m   [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m108| [39m   [34mexpect[39m(response[33m.[39mbody[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m109| [39m   [34mexpect[39m(response[33m.[39mbody[33m.[39mresults[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m110| [39m   expect(response.body.results[0].work_experience_id).toBe(experience‚Ä¶
    [90m111| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/4]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mPUT /api/milestones/:id[2m > [22mshould update a milestone (Admin)
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts:[2m137:28[22m[39m
    [90m135| [39m    )[33m;[39m
    [90m136| [39m   }
    [90m137| [39m   [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m138| [39m   [34mexpect[39m(response[33m.[39mbody[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m139| [39m   [34mexpect[39m(response[33m.[39mbody[33m.[39mmilestone[33m.[39mtitle)[33m.[39m[34mtoBe[39m(payload[33m.[39mtitle)[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/4]‚éØ[22m[39m

[41m[1m FAIL [22m[49m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts[2m > [22mWorkMilestoneModule (e2e)[2m > [22mDELETE /api/milestones/:id[2m > [22mshould delete a milestone (Admin)
[31m[1mAssertionError[22m: expected 400 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 400[39m

[36m [2m‚ùØ[22m src/modules/work-milestone/__tests__/work-milestone.e2e.test.ts:[2m175:28[22m[39m
    [90m173| [39m    )[33m;[39m
    [90m174| [39m   }
    [90m175| [39m   [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m176| [39m   [34mexpect[39m(response[33m.[39mbody[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m177| [39m  })[33m;[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/4]‚éØ[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[2m   Start at [22m 03:05:11
[2m   Duration [22m 3.13s[2m (transform 1.18s, setup 28ms, import 2.61s, tests 335ms, environment 0ms)[22m

